{"ast":null,"code":"var _jsxFileName = \"/Users/heiwa.local/Desktop/Projects/test-task/test-task-ntprogress/client/src/app/index.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport './App.css';\nimport { Instrument } from \"../shared/enumes\";\nimport { WSConnector } from \"../shared/api\";\nimport { ExchangePage } from \"../pages\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ws = new WSConnector();\nfunction App() {\n  _s();\n  const [isPaused, setIsPaused] = useState(false);\n\n  // const ws = useRef<WSConnector>()\n  const [status, setStatus] = useState(\"\");\n  const [data, setData] = useState();\n  useEffect(() => {\n    if (!isPaused) {\n      ws.connect();\n      console.log(\"connected\");\n      // ws.current = new WebSocket(\"ws://localhost:8080/ws/\");\n      // ws.onopen = () => setStatus(\"Open\")\n      // ws.current.onclose = () => setStatus(\"Close\")\n      // ws.current.onmessage = (message: any) => {setData(message)}\n    }\n\n    return () => {\n      console.log(\"disconnected\");\n      ws.disconnect();\n    };\n  }, [ws, isPaused]);\n  const getData = () => {\n    ws.subscribeMarketData(Instrument.eur_rub);\n    // ws.current?.send(JSON.stringify({\n    //     messageType: ClientMessageType.subscribeMarketData,\n    //     message: {\n    //         instrument: Instrument.eur_rub\n    //     } as SubscribeMarketData\n    // } as ClientEnvelope))\n  };\n\n  return /*#__PURE__*/_jsxDEV(ExchangePage, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 9\n  }, this);\n}\n_s(App, \"OxeTI/7GK+Q6m7wFmawz28d+bXM=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","Instrument","WSConnector","ExchangePage","ws","App","isPaused","setIsPaused","status","setStatus","data","setData","connect","console","log","disconnect","getData","subscribeMarketData","eur_rub"],"sources":["/Users/heiwa.local/Desktop/Projects/test-task/test-task-ntprogress/client/src/app/index.tsx"],"sourcesContent":["import React, {useEffect, useState} from 'react';\nimport './App.css';\nimport {ClientEnvelope, SubscribeMarketData} from \"../shared/models\";\nimport {ClientMessageType, Instrument} from \"../shared/enumes\";\nimport {ServerEnvelope} from \"../shared/models\";\nimport { WSConnector } from \"../shared/api\";\nimport {ExchangePage} from \"../pages\";\n\nconst ws = new WSConnector()\nfunction App() {\n    const [isPaused, setIsPaused] = useState(false);\n\n    // const ws = useRef<WSConnector>()\n    const [status, setStatus] = useState(\"\");\n    const [data, setData] = useState<ServerEnvelope>()\n\n    useEffect(() => {\n        if (!isPaused) {\n            ws.connect()\n            console.log(\"connected\")\n            // ws.current = new WebSocket(\"ws://localhost:8080/ws/\");\n            // ws.onopen = () => setStatus(\"Open\")\n            // ws.current.onclose = () => setStatus(\"Close\")\n            // ws.current.onmessage = (message: any) => {setData(message)}\n        }\n        return () => {\n            console.log(\"disconnected\")\n            ws.disconnect()\n        }\n    }, [ws, isPaused])\n\n    const getData = () => {\n        ws.subscribeMarketData(\n            Instrument.eur_rub\n        )\n        // ws.current?.send(JSON.stringify({\n        //     messageType: ClientMessageType.subscribeMarketData,\n        //     message: {\n        //         instrument: Instrument.eur_rub\n        //     } as SubscribeMarketData\n        // } as ClientEnvelope))\n    }\n\n    return (\n        <ExchangePage/>\n  );\n}\n\nexport default App;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAGC,SAAS,EAAEC,QAAQ,QAAO,OAAO;AAChD,OAAO,WAAW;AAElB,SAA2BC,UAAU,QAAO,kBAAkB;AAE9D,SAASC,WAAW,QAAQ,eAAe;AAC3C,SAAQC,YAAY,QAAO,UAAU;AAAC;AAEtC,MAAMC,EAAE,GAAG,IAAIF,WAAW,EAAE;AAC5B,SAASG,GAAG,GAAG;EAAA;EACX,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGP,QAAQ,CAAC,KAAK,CAAC;;EAE/C;EACA,MAAM,CAACQ,MAAM,EAAEC,SAAS,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACU,IAAI,EAAEC,OAAO,CAAC,GAAGX,QAAQ,EAAkB;EAElDD,SAAS,CAAC,MAAM;IACZ,IAAI,CAACO,QAAQ,EAAE;MACXF,EAAE,CAACQ,OAAO,EAAE;MACZC,OAAO,CAACC,GAAG,CAAC,WAAW,CAAC;MACxB;MACA;MACA;MACA;IACJ;;IACA,OAAO,MAAM;MACTD,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;MAC3BV,EAAE,CAACW,UAAU,EAAE;IACnB,CAAC;EACL,CAAC,EAAE,CAACX,EAAE,EAAEE,QAAQ,CAAC,CAAC;EAElB,MAAMU,OAAO,GAAG,MAAM;IAClBZ,EAAE,CAACa,mBAAmB,CAClBhB,UAAU,CAACiB,OAAO,CACrB;IACD;IACA;IACA;IACA;IACA;IACA;EACJ,CAAC;;EAED,oBACI,QAAC,YAAY;IAAA;IAAA;IAAA;EAAA,QAAE;AAEvB;AAAC,GArCQb,GAAG;AAAA,KAAHA,GAAG;AAuCZ,eAAeA,GAAG;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}